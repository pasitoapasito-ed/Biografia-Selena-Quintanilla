<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selena Quintanilla: Actividad Interactiva Completa (Español II-III)</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet"> 
    <style>
        /*
        ========================================
        1. ESTILOS CSS GENERALES Y PALETA DE COLORES
        ========================================
        */
        :root {
            /* Paleta de colores solicitada */
            --color-titulo: #f719ae;    /* Rosa Fuerte - Títulos, Énfasis, Botones Principales */
            --color-acento: #fbac68;    /* Naranja Suave - Acentos, Feedback, Borde */
            --color-claro: #fdd050;     /* Amarillo Brillo - Fondo Claro, Matches Correctos */
            --color-texto: #31a4ac;     /* Azul Aguamarina - Texto General, Bordes */
            --color-fondo-claro: #fcfcfc; 
            --color-texto-oscuro: #333333;
            --sombra-boton: 0 4px 6px rgba(0, 0, 0, 0.2);
            --sombra-opcion: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Quicksand', sans-serif; /* Fuente de texto */
            background-color: var(--color-fondo-claro);
            color: var(--color-texto-oscuro);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .contenedor-principal {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-family: 'Caveat', cursive; /* Fuente de título */
            text-align: center;
            color: var(--color-titulo);
            font-size: 3em;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--color-claro);
            padding-bottom: 10px;
            text-transform: uppercase;
        }

        h2 {
            font-family: 'Caveat', cursive; /* Fuente de título */
            color: var(--color-texto);
            font-size: 2.2em;
            margin-top: 30px;
            border-left: 5px solid var(--color-acento);
            padding-left: 10px;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.1em;
            text-align: justify;
            color: var(--color-texto-oscuro);
        }
        
        strong {
            color: var(--color-titulo); 
            font-weight: 700;
        }

        /* Estilos para la imagen de Selena Quintanilla */
        .imagen-biografia {
            display: block;
            max-width: 45%;
            height: auto;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 3px solid var(--color-acento);
        }

        /* Botones de Navegación/Acción - MANTENIDOS EN APARIENCIA GENERAL */
        .boton {
            display: block;
            width: 80%;
            margin: 40px auto;
            padding: 15px 30px;
            font-family: 'Quicksand', sans-serif; /* Aplicar la fuente Quicksand */
            font-size: 1.3em;
            font-weight: bold;
            color: white;
            background-color: var(--color-titulo); 
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s, box-shadow 0.3s;
            box-shadow: var(--sombra-boton);
            text-transform: uppercase;
        }

        .boton:hover {
            background-color: #d7159c;
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
        }
        
        .boton:active {
            transform: scale(0.98);
        }

        #boton-vocabulario, #iniciar-burbujas-btn {
            background-color: var(--color-texto); 
        }

        #boton-vocabulario:hover, #iniciar-burbujas-btn:hover {
            background-color: #2a888e; 
        }
        
        /* CAMBIO SOLICITADO: Color del botón "Volver a empezar" */
        #pantalla-final-burbujas .boton {
            background-color: var(--color-texto); /* #31a4ac */
        }
        #pantalla-final-burbujas .boton:hover {
            background-color: #2a888e; 
        }

        /*
        ========================================
        2. ESTILOS JUEGO CAMINO A LA FAMA (COMPRENSIÓN)
        ========================================
        */
        #lectura-seccion {
            padding: 20px;
            border: 2px dashed var(--color-acento);
            border-radius: 10px;
        }
        
        #juego-seccion, #vocabulario-seccion, #juego-burbujas-seccion {
            display: none;
        }
        
        /* Medidor de Progreso (Fama) */
        .barra-progreso {
            width: 100%;
            height: 30px;
            background-color: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progreso-relleno {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, var(--color-claro), var(--color-acento), var(--color-titulo));
            transition: width 0.5s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            box-sizing: border-box;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
        }
        
        .pregunta-card {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border-left: 5px solid var(--color-texto);
            transition: opacity 0.5s, transform 0.5s;
        }

        .pregunta-card h3 {
            color: var(--color-texto);
            margin-top: 0;
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        /* Restauración de la apariencia de las opciones de respuesta */
        .opcion-respuesta {
            display: block;
            width: 100%; /* Ocupa todo el ancho */
            margin: 10px 0;
            padding: 12px;
            background-color: var(--color-fondo-claro);
            border: 1px solid var(--color-texto);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;
            font-size: 1.05em;
            text-align: left; /* Alineación del texto a la izquierda */
            box-shadow: var(--sombra-opcion);
            font-family: 'Quicksand', sans-serif; 
        }

        .opcion-respuesta:hover:not(.disabled) {
            background-color: #E6F0F0;
            border-color: var(--color-acento);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .opcion-respuesta.correcta {
            background-color: #D3F3E3; 
            border-color: var(--color-texto);
            font-weight: bold;
        }

        .opcion-respuesta.incorrecta {
            background-color: #FEE7F2; 
            border-color: var(--color-titulo);
        }

        .opcion-respuesta.disabled {
            cursor: default;
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .feedback.correcto {
            background-color: var(--color-texto);
            color: white;
        }

        .feedback.incorrecto {
            background-color: var(--color-titulo);
            color: white;
        }

        .boton-siguiente-nivel {
            display: none; /* De vuelta al comportamiento original */
            width: 100%;
            padding: 12px;
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            background-color: var(--color-texto);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: 'Quicksand', sans-serif;
        }
        
        /* Pantalla Final del Juego de Comprensión */
        #pantalla-final-juego {
            text-align: center;
            padding: 50px 20px;
            background-color: var(--color-texto);
            color: white; /* Color del texto general de la pantalla final */
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            display: none;
        }

        #pantalla-final-juego h2 {
            color: var(--color-claro);
            font-size: 3em;
            margin-bottom: 20px;
            border: none;
        }
        
        /* Estilo para centrar los mensajes de felicitación */
        .mensaje-centrado {
            text-align: center;
        }
        /* CAMBIO SOLICITADO: Color blanco para "¡Felicidades! Has completado el" */
        #pantalla-final-juego .mensaje-centrado {
             color: white; 
        }
        #pantalla-final-juego .mensaje-centrado strong {
             color: var(--color-acento); 
        }


        /*
        ========================================
        3. ESTILOS VOCABULARIO (PAIRING)
        ========================================
        */
        #vocabulario-contenedor {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 20px;
        }

        .columna-palabras {
            background-color: #E6F0F0;
            border: 2px solid var(--color-texto);
        }

        .columna-definiciones {
            background-color: #FFF8E6;
            border: 2px solid var(--color-acento);
        }

        .item-vocabulario {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s, box-shadow 0.2s, background-color 0.2s;
            user-select: none;
        }

        .palabra {
            background-color: var(--color-texto);
            color: white;
        }

        .definicion {
            background-color: var(--color-acento);
            color: var(--color-texto-oscuro);
            font-weight: normal;
        }

        .seleccionado {
            transform: scale(1.05);
            box-shadow: 0 0 0 3px var(--color-titulo);
        }

        .match-correcto {
            background-color: #31a4ac !important;
            color: white !important;
            cursor: default;
        }

        /* Pantalla Final de Vocabulario */
        #pantalla-final-vocabulario {
            text-align: center;
            padding: 50px 20px;
            background-color: var(--color-titulo);
            color: white; 
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            display: none;
        }

        #pantalla-final-vocabulario h2 {
            color: var(--color-claro);
            font-size: 3em;
            margin-bottom: 20px;
            border: none;
        }
        /* CAMBIO SOLICITADO: Color blanco para "Has completado la actividad de vocabulario sobre Celia Cruz." */
        #pantalla-final-vocabulario p {
            color: white; 
        }
        #pantalla-final-vocabulario strong {
            color: var(--color-claro); 
        }

        /*
        ========================================
        4. ESTILOS JUEGO VERDADERO/FALSO (BURBUJAS)
        ========================================
        */
        #juego-burbujas-seccion {
            background-color: #f0f8ff;
            border-radius: 10px;
            padding: 20px;
        }

        #area-juego-burbujas {
            position: relative;
            height: 500px;
            width: 100%;
            background: linear-gradient(to top, #e0f7fa 0%, var(--color-texto) 10%); 
            border: 3px solid var(--color-texto);
            border-radius: 10px;
            overflow: hidden;
        }

        #barra-info-burbujas {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--color-titulo);
        }

        .medidor {
            padding: 5px 10px;
            border-radius: 5px;
            background-color: var(--color-fondo-claro);
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        #control-burbuja {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding-bottom: 20px;
            z-index: 10;
        }

        .burbuja {
            position: absolute;
            width: auto;
            min-width: 250px;
            max-width: 80%;
            padding: 15px 25px;
            border-radius: 50px;
            background-color: rgba(255, 255, 255, 0.85);
            border: 3px solid var(--color-titulo);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            font-weight: bold;
            color: var(--color-texto);
            font-size: 1.1em;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 5;
            top: 550px;
            display: none;
        }

        @keyframes flotar {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-550px) scale(1.1); opacity: 0.9; }
        }

        @keyframes explotar {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .explotando {
            animation: explotar 0.4s ease-out forwards;
        }

        #controles-vf {
            display: flex;
            gap: 20px;
            z-index: 20;
            margin-top: 20px;
        }

        .boton-vf {
            padding: 15px 35px;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
            transition: transform 0.1s, background-color 0.2s;
            font-family: 'Quicksand', sans-serif;
        }
        
        .boton-vf:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.2);
        }

        /* CAMBIO SOLICITADO: Color verde (#00ff00) para el botón VERDADERO */
        #btn-verdadero {
            background-color: #00ff00; /* Verde brillante */
        }
        /* Ajustar hover para el nuevo color */
        #btn-verdadero:hover {
            background-color: #00cc00; /* Un verde un poco más oscuro al pasar el ratón */
        }


        #btn-falso {
            background-color: var(--color-titulo);
        }

        #retroalimentacion-vf {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            background-color: rgba(49, 164, 172, 0.9);
            color: white;
            border-radius: 8px;
            font-weight: bold;
            display: none;
            z-index: 15;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            transition: opacity 0.3s;
        }

        #combo-display {
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4em;
            color: var(--color-claro);
            text-shadow: 2px 2px 5px var(--color-titulo);
            font-weight: 900;
            opacity: 0;
            display: none;
            z-index: 20;
        }

        @keyframes comboPop {
            0% { opacity: 0; transform: translate(-50%, 50px) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, 0px) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50px) scale(1); }
        }

        #pantalla-final-burbujas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(247, 25, 174, 0.95);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            text-align: center;
            z-index: 30;
            display: none;
        }
        
        #pantalla-final-burbujas h2 {
            color: var(--color-claro);
            font-size: 3.5em;
            margin-bottom: 20px;
            border: none;
        }
        
        /* CAMBIO SOLICITADO: Texto de la pantalla final en blanco */
        #pantalla-final-burbujas p {
            color: white;
            font-size: 1.1em;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        .puntuacion-final {
            font-size: 3em;
            color: var(--color-texto);
            margin-top: 15px;
            padding: 10px;
            background-color: white;
            border-radius: 10px;
        }
        
    </style>
</head>
<body>

    <div class="contenedor-principal">
        <h1>Selena Quintanilla: Actividades Interactivas</h1>

        <div id="lectura-seccion">
            <h2>Una artista única</h2>
            <audio controls src="https://pasitoapasito-ed.github.io/Biografia-Selena-Quintanilla/selena.mp3"></audio>
            
<img src="https://github.com/pasitoapasito-ed/Biografia-Selena-Quintanilla/blob/main/selena-img.png?raw=true" alt="Imagen de Selena Quintanilla" class="imagen-biografia">
            
            <p><strong>¿Quién fue Selena Quintanilla?</strong></p>
            <p>Selena Quintanilla fue una <strong>cantante</strong> estadounidense de origen mexicano muy famosa. Nació el 16 de abril de 1971 en Lake Jackson, Texas. Desde pequeña le gustaba cantar con su familia. Su padre, Abraham, formó con ella y sus hermanos un grupo musical llamado “Selena y Los Dinos”. Con el tiempo, Selena se convirtió en la reina de la música tejana.</p>

            <h2>Eventos importantes de su vida</h2>
            <p>En los años 80, Selena ganó concursos y empezó a ser reconocida en Texas. En 1989 grabó su primer disco con la compañía EMI. En 1993, recibió un <strong>premio</strong> Grammy por su álbum <strong>Selena Live!</strong>, siendo la primera mujer tejana en lograrlo. Un año después, lanzó <strong>Amor Prohibido</strong>, uno de sus discos más famosos.</p>
            <p>Selena también diseñaba ropa y abrió <strong>boutiques</strong> en Texas. Lamentablemente, el 31 de marzo de 1995, cuando tenía solo 23 años, fue asesinada por la presidenta de su club de fans. Su muerte conmocionó al mundo.</p>

            <h2>¿Por qué es famosa?</h2>
            <p>Famosa por ser la <strong>“Reina de la Música Tejana”</strong>, combinó la cumbia, pop y música tejana. Cantaba en español e inglés, y llegó a ser muy popular en Estados Unidos y en América Latina. Su disco <strong>Dreaming of You</strong>, publicado después de su muerte, fue un gran éxito.</p>

            <h2>¿Por qué es importante para la cultura hispana?</h2>
            <p>Selena representa el <strong>orgullo</strong> y la fuerza de la comunidad latina en Estados Unidos. Es un símbolo de perseverancia y talento, y todavía hoy inspira a nuevas generaciones.</p>

            <button class="boton" onclick="iniciarJuego()">Poner a prueba mi comprensión</button>
        </div>

        <div id="juego-seccion">
            <h2>Camino a la Fama de Selena Quintanilla</h2>

            <div class="barra-progreso">
                <div class="progreso-relleno" id="progreso-relleno">FAMA: 0%</div>
            </div>

            <div id="nivel-contenedor">
                </div>

            <div id="pantalla-final-juego">
                <h2>¡Misión Cumplida! 🎉</h2>
                <p class="mensaje-centrado">¡Felicidades! Has completado el <strong>Camino a la Fama de Selena Quintanilla</strong>.</p>
                <button class="boton" id="boton-vocabulario" onclick="iniciarVocabulario()">Actividad de vocabulario</button>
            </div>
        </div>
        
        <div id="vocabulario-seccion">
            <h2>Actividad de Vocabulario: Unir Conceptos</h2>
            <p style="text-align:center;"><strong>Instrucción:</strong> Selecciona una palabra de la izquierda y luego su definición correcta de la derecha.</p>

            <div id="vocabulario-contenedor">
                <div class="columna-palabras" id="columna-palabras">
                    </div>
                <div class="columna-definiciones" id="columna-definiciones">
                    </div>
            </div>

            <div id="feedback-vocabulario" style="display: none;"></div>
            
            <div id="pantalla-final-vocabulario">
                <h2>🌟 ¡Excelente trabajo!</h2>
                <p class="mensaje-centrado">Has completado la actividad de vocabulario sobre Selena Quintanilla.</p>
                <button class="boton" id="iniciar-burbujas-btn" onclick="iniciarJuegoBurbujas()">¡A jugar! Explotando burbujas</button>
            </div>
        </div>
        
        <div id="juego-burbujas-seccion">
            <h2>Explotando Burbujas de Fama</h2>
            <p style="text-align:center; margin-bottom: 15px;">¡Sé rápido! Haz clic en Verdadero o Falso antes de que la burbuja se caiga.</p>

            <div id="barra-info-burbujas">
                <div class="medidor">Puntuación: <span id="puntuacion-burbujas">0</span></div>
                <div class="medidor">Vidas: <span id="vidas-burbujas">❤️❤️❤️</span></div>
                <div class="medidor">Combo: <span id="combo-burbujas">0</span>x</div>
            </div>

            <div id="area-juego-burbujas">
                <div id="combo-display"></div>
                <div id="retroalimentacion-vf"></div>
                
                <div id="burbuja-activa" class="burbuja" style="left: 30%;">La afirmación va aquí.</div>

                <div id="control-burbuja">
                    <div id="controles-vf">
                        <button class="boton-vf" id="btn-verdadero" onclick="responderBurbuja(true)">VERDADERO</button>
                        <button class="boton-vf" id="btn-falso" onclick="responderBurbuja(false)">FALSO</button>
                    </div>
                </div>

                <div id="pantalla-final-burbujas">
                    <h2 id="titulo-final-burbujas">¡Fin del Juego! 🏆</h2>
                    <p>Has completado el juego de Verdadero/Falso sobre Selena Quintanilla.</p>
                    <p>Tu puntuación final es:</p>
                    <div class="puntuacion-final" id="puntuacion-final-burbujas">0</div>
                    <button class="boton" onclick="iniciarJuegoBurbujas()">Volver a empezar</button>
                </div>

            </div>
        </div>

    </div>

    <script>
        /*
        ========================================
        JAVASCRIPT: LÓGICA DEL JUEGO DE COMPRENSIÓN (CAMINO A LA FAMA)
        ========================================
        */

        // 1. ESTRUCTURA DE DATOS: PREGUNTAS DEL JUEGO (Adaptadas a Selena Quintanilla)
        const niveles = [
            {
                nombre: "Orígenes y Comienzos",
                preguntas: [
                    {
                        pregunta: "¿Dónde nació Selena Quintanilla?",
                        opciones: ["Corpus Christi, Texas", "Lake Jackson, Texas", "Monterrey, México", "Miami, Florida"],
                        respuestaCorrecta: 1
                    },
                    {
                        pregunta: "¿Cómo se llamó el grupo musical que su padre formó con ella y sus hermanos?",
                        opciones: ["Selena y La Banda", "Los Quintanilla Star", "Selena y Los Dinos", "Los Reyes del Pop"],
                        respuestaCorrecta: 2
                    }
                ]
            },
            {
                nombre: "Carrera y Éxito",
                preguntas: [
                    {
                        pregunta: "¿En qué año ganó Selena un premio Grammy?",
                        opciones: ["1989", "1995", "1993", "1980"],
                        respuestaCorrecta: 2
                    },
                    {
                        pregunta: "¿Cuál de estos álbumes es mencionado en el texto como uno de sus más famosos?",
                        opciones: ["Ven Conmigo", "Entre a Mi Mundo", "Amor Prohibido", "Bidi Bidi Bom Bom"],
                        respuestaCorrecta: 2
                    }
                ]
            },
            {
                nombre: "Tragedia y Legado",
                preguntas: [
                    {
                        pregunta: "¿Cuál es el título por el que Selena es famosa?",
                        opciones: ["La Diosa de la Cumbia", "La Reina del Pop", "La Reina de la Música Tejana", "La Señora de la Salsa"],
                        respuestaCorrecta: 2
                    },
                    {
                        pregunta: "¿Qué otra actividad hacía Selena además de cantar?",
                        opciones: ["Escribir poesía", "Diseñar ropa y abrir boutiques", "Actuar en Hollywood", "Cocinar en un restaurante"],
                        respuestaCorrecta: 1
                    }
                ]
            },
            {
                nombre: "Reconocimiento y Cierre",
                preguntas: [
                    {
                        pregunta: "¿Qué se publicó después de su muerte y fue un gran éxito?",
                        opciones: ["Su biografía", "Su disco Dreaming of You", "Una colección de videos musicales", "Su línea de perfumes"],
                        respuestaCorrecta: 1
                    },
                    {
                        pregunta: "¿Qué representa Selena para la comunidad latina en Estados Unidos, según el texto?",
                        opciones: ["El símbolo de la moda en Texas", "Un ícono de la tristeza", "El orgullo y la fuerza de la comunidad latina", "La artista más rica de Texas"],
                        respuestaCorrecta: 2
                    }
                ]
            }
        ];

        // 2. VARIABLES DE ESTADO DEL JUEGO
        let nivelActual = 0;
        let preguntasRespondidasCorrectamenteEnNivel = 0;
        const totalNiveles = niveles.length;
        const famaPorNivel = 100 / totalNiveles;

        // 3. REFERENCIAS DEL DOM (HTML Elements)
        const lecturaSeccion = document.getElementById('lectura-seccion');
        const juegoSeccion = document.getElementById('juego-seccion');
        const nivelContenedor = document.getElementById('nivel-contenedor');
        const progresoRelleno = document.getElementById('progreso-relleno');
        const pantallaFinalJuego = document.getElementById('pantalla-final-juego');

        /**
         * Oculta la sección de lectura y muestra e inicia la sección del juego.
         */
        function iniciarJuego() {
            lecturaSeccion.style.display = 'none';
            juegoSeccion.style.display = 'block';
            cargarNivel();
        }

        /**
         * Muestra las preguntas del nivel actual.
         */
        function cargarNivel() {
            if (nivelActual >= totalNiveles) {
                mostrarPantallaFinalJuego();
                return;
            }

            nivelContenedor.style.opacity = '0';
            setTimeout(() => {
                nivelContenedor.innerHTML = '';
                preguntasRespondidasCorrectamenteEnNivel = 0;

                const nivel = niveles[nivelActual];
                let nivelHTML = `<h2>Nivel ${nivelActual + 1}: ${nivel.nombre}</h2>`;

                nivel.preguntas.forEach((preguntaData, indexPregunta) => {
                    // La tarjeta de pregunta NO debe tener la clase 'respondida-correctamente' al cargar
                    nivelHTML += `
                        <div class="pregunta-card" data-pregunta-index="${indexPregunta}">
                            <h3>Pregunta ${indexPregunta + 1}: ${preguntaData.pregunta}</h3>
                    `;
                    
                    preguntaData.opciones.forEach((opcion, indexOpcion) => {
                        nivelHTML += `
                            <button 
                                class="opcion-respuesta" 
                                onclick="verificarRespuesta(${indexPregunta}, ${indexOpcion}, this)"
                                data-opcion-index="${indexOpcion}"
                            >
                                ${opcion}
                            </button>
                        `;
                    });

                    nivelHTML += `
                            <div class="feedback" id="feedback-${indexPregunta}"></div>
                        </div>
                    `;
                });

                nivelHTML += `
                    <button class="boton-siguiente-nivel" id="siguiente-nivel-btn" onclick="siguienteNivel()">
                        ¡Hecho! Continuar al siguiente nivel
                    </button>
                `;

                nivelContenedor.innerHTML = nivelHTML;
                nivelContenedor.style.opacity = '1';
            }, 500);
        }

        /**
         * Verifica si la opción seleccionada es correcta.
         * LÓGICA CLAVE: Solo permite avanzar si TODAS las preguntas del nivel han sido respondidas correctamente.
         */
        function verificarRespuesta(indexPregunta, indexOpcion, boton) {
            const pregunta = niveles[nivelActual].preguntas[indexPregunta];
            const esCorrecta = indexOpcion === pregunta.respuestaCorrecta;
            const feedbackElement = document.getElementById(`feedback-${indexPregunta}`);
            const preguntaCard = boton.closest('.pregunta-card');
            
            // Si ya se respondió correctamente, no hacer nada (estado restaurado)
            if (preguntaCard.getAttribute('data-respondida') === 'true') return;

            // Deshabilitar todas las opciones al intentar responder
            preguntaCard.querySelectorAll('.opcion-respuesta').forEach(b => b.classList.add('disabled'));

            if (esCorrecta) {
                boton.classList.add('correcta');
                feedbackElement.className = 'feedback correcto';
                feedbackElement.innerHTML = '✅ Correcto. ¡Excelente!';
                feedbackElement.style.display = 'block';

                // Marcar la tarjeta como respondida correctamente para evitar reintentos en esta pregunta
                preguntaCard.setAttribute('data-respondida', 'true');
                preguntasRespondidasCorrectamenteEnNivel++;

                // Verificar si TODAS las preguntas del nivel han sido respondidas
                if (preguntasRespondidasCorrectamenteEnNivel === niveles[nivelActual].preguntas.length) {
                    document.getElementById('siguiente-nivel-btn').style.display = 'block';
                    actualizarProgreso();
                }

            } else {
                // Si es incorrecta
                boton.classList.add('incorrecta');
                feedbackElement.className = 'feedback incorrecto';
                feedbackElement.innerHTML = '❌ Incorrecto. Vuelve a leer el texto y ¡Intenta otra vez!';
                feedbackElement.style.display = 'block';
                
                // Habilitar de nuevo solo las opciones incorrectas y dejar la incorrecta seleccionada visible (comportamiento anterior)
                preguntaCard.querySelectorAll('.opcion-respuesta').forEach(b => {
                    if (b !== boton) {
                         b.classList.remove('disabled');
                    }
                });
                
                // Remover la clase incorrecta después de un tiempo para permitir reintentar la misma pregunta
                setTimeout(() => {
                    boton.classList.remove('incorrecta');
                    preguntaCard.querySelectorAll('.opcion-respuesta').forEach(b => b.classList.remove('disabled'));
                    feedbackElement.style.display = 'none';
                }, 1500);
            }
        }


        /**
         * Avanza al siguiente nivel del juego.
         */
        function siguienteNivel() {
            nivelActual++;
            document.getElementById('siguiente-nivel-btn').style.display = 'none';
            cargarNivel();
        }

        /**
         * Actualiza la barra de progreso (Fama).
         */
        function actualizarProgreso() {
            const progreso = nivelActual * famaPorNivel;
            progresoRelleno.style.width = `${progreso + famaPorNivel}%`;
            progresoRelleno.textContent = `FAMA: ${Math.round(progreso + famaPorNivel)}%`;
        }

        /**
         * Muestra la pantalla final del juego de comprensión.
         */
        function mostrarPantallaFinalJuego() {
            nivelContenedor.style.display = 'none';
            pantallaFinalJuego.style.display = 'block';
        }


        /*
        ========================================
        JAVASCRIPT: LÓGICA DEL VOCABULARIO
        ========================================
        */
        
        // 4. ESTRUCTURA DE DATOS: VOCABULARIO (Adaptado a Selena Quintanilla)
        const vocabularioData = [
            { palabra: "Cantante", definicion: "Persona que canta profesionalmente y actúa ante un público.", id: 0 },
            { palabra: "Famosa", definicion: "Algo o alguien que es muy conocido o popular por la gente.", id: 1 },
            { palabra: "Boutique", definicion: "Tienda pequeña y elegante que vende ropa, joyas o accesorios exclusivos.", id: 2 },
            { palabra: "Orgullo", definicion: "Sentimiento de respeto y gran valor que una persona tiene por sí misma o por su grupo.", id: 3 },
            { palabra: "Legado", definicion: "Lo que una persona ha hecho en su vida y la gente recuerda o que tiene un efecto en el futuro después de su muerte.", id: 4 }
        ];

        // 5. VARIABLES DE ESTADO DEL VOCABULARIO
        let palabraSeleccionada = null;
        let paresCorrectos = 0;
        const totalPares = vocabularioData.length;

        const vocabularioSeccion = document.getElementById('vocabulario-seccion');
        const columnaPalabras = document.getElementById('columna-palabras');
        const columnaDefiniciones = document.getElementById('columna-definiciones');
        const pantallaFinalVocabulario = document.getElementById('pantalla-final-vocabulario');
        const feedbackVocabulario = document.getElementById('feedback-vocabulario');
        
        // Helper para obtener variables CSS
        function varColor(variable) {
            return getComputedStyle(document.documentElement).getPropertyValue(variable) || variable;
        }


        /**
         * Oculta la sección del juego y muestra la de vocabulario.
         */
        function iniciarVocabulario() {
            juegoSeccion.style.display = 'none';
            vocabularioSeccion.style.display = 'block';
            cargarVocabulario();
        }

        /**
         * Carga y mezcla las palabras y definiciones.
         */
        function cargarVocabulario() {
            columnaPalabras.innerHTML = '';
            columnaDefiniciones.innerHTML = '';
            paresCorrectos = 0;
            
            const palabras = vocabularioData.map(item => ({ id: item.id, texto: item.palabra }));
            const definiciones = vocabularioData.map(item => ({ id: item.id, texto: item.definicion }));

            // Mezclar el orden de las definiciones
            definiciones.sort(() => Math.random() - 0.5); 

            // Inyectar Palabras
            palabras.forEach(p => {
                const item = document.createElement('div');
                item.className = 'item-vocabulario palabra';
                item.textContent = p.texto;
                item.dataset.matchId = p.id;
                item.onclick = () => seleccionarPalabra(item);
                columnaPalabras.appendChild(item);
            });

            // Inyectar Definiciones
            definiciones.forEach(d => {
                const item = document.createElement('div');
                item.className = 'item-vocabulario definicion';
                item.textContent = d.texto;
                item.dataset.matchId = d.id;
                item.onclick = () => seleccionarDefinicion(item);
                columnaDefiniciones.appendChild(item);
            });
        }

        /**
         * Maneja la selección de un elemento Palabra.
         */
        function seleccionarPalabra(palabra) {
            if (palabra.classList.contains('match-correcto')) return;

            if (palabraSeleccionada) {
                palabraSeleccionada.classList.remove('seleccionado');
            }

            palabraSeleccionada = palabra;
            palabraSeleccionada.classList.add('seleccionado');
            
            feedbackVocabulario.style.display = 'none';
        }

        /**
         * Maneja la selección de un elemento Definición e intenta hacer match.
         */
        function seleccionarDefinicion(definicion) {
            if (definicion.classList.contains('match-correcto')) return;
            
            if (!palabraSeleccionada) {
                mostrarFeedbackVocabulario('Primero selecciona una <strong>palabra</strong> de la columna izquierda.', false);
                return;
            }

            const idPalabra = parseInt(palabraSeleccionada.dataset.matchId);
            const idDefinicion = parseInt(definicion.dataset.matchId);

            if (idPalabra === idDefinicion) {
                // MATCH CORRECTO
                palabraSeleccionada.classList.remove('seleccionado');
                palabraSeleccionada.classList.add('match-correcto');
                definicion.classList.add('match-correcto');
                
                paresCorrectos++;
                palabraSeleccionada = null;
                
                mostrarFeedbackVocabulario('✅ ¡Par correcto! Sigue uniendo los conceptos.', true);

                if (paresCorrectos === totalPares) {
                    setTimeout(mostrarPantallaFinalVocabulario, 1000);
                }

            } else {
                // MATCH INCORRECTO
                palabraSeleccionada.classList.remove('seleccionado');
                palabraSeleccionada = null;
                mostrarFeedbackVocabulario('❌ Par incorrecto. Intenta de nuevo con otras opciones.', false);
            }
        }
        
        /**
         * Muestra el feedback de la actividad de vocabulario.
         */
        function mostrarFeedbackVocabulario(mensaje, esCorrecto) {
            feedbackVocabulario.style.display = 'block';
            // Reemplazo de markdown por <strong>
            feedbackVocabulario.innerHTML = mensaje.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            if (esCorrecto) {
                feedbackVocabulario.style.backgroundColor = '#D3F3E3'; 
                feedbackVocabulario.style.color = varColor('--color-texto');
                feedbackVocabulario.style.border = `2px solid ${varColor('--color-texto')}`;
            } else {
                feedbackVocabulario.style.backgroundColor = '#FEE7F2';
                feedbackVocabulario.style.color = varColor('--color-titulo');
                feedbackVocabulario.style.border = `2px solid ${varColor('--color-titulo')}`;
            }
        }

        /**
         * Muestra la pantalla final del vocabulario.
         */
        function mostrarPantallaFinalVocabulario() {
            document.getElementById('vocabulario-contenedor').style.display = 'none';
            feedbackVocabulario.style.display = 'none';
            pantallaFinalVocabulario.style.display = 'block';
        }


        /*
        ========================================
        JAVASCRIPT: LÓGICA DEL JUEGO VERDADERO/FALSO (BURBUJAS)
        ========================================
        */

        // 6. ESTRUCTURA DE DATOS: AFIRMACIONES V/F (Usando la lista proporcionada)
        const afirmacionesBurbujas = [
            {
                texto: "Selena es considerada la 'Reina de la música pop'.",
                respuesta: false,
                feedback: "Falso. Selena es la 'Reina de la <strong>Música Tejana</strong>'."
            },
            {
                texto: "Selena empezó a ser reconocida en Texas en los años 80.",
                respuesta: true,
                feedback: "Verdadero. En los 80 ganó concursos y fue reconocida."
            },
            {
                texto: "Ella ganó el Premio Grammy en 1994.",
                respuesta: false,
                feedback: "Falso. Ganó el Premio Grammy en <strong>1993</strong> por 'Selena Live!'."
            },
            {
                texto: "Su disco 'Dreaming of You' se publicó y fue un gran éxito después de su muerte.",
                respuesta: true,
                feedback: "Verdadero. Fue un gran éxito póstumo."
            },
            {
                texto: "Selena diseñaba ropa y cantaba.",
                respuesta: true,
                feedback: "Verdadero. Diseñaba ropa y tenía boutiques, además de su carrera musical."
            },
            {
                texto: "Selena murió a los 20 años.",
                respuesta: false,
                feedback: "Falso. Murió a los <strong>23</strong> años."
            },
            {
                texto: "El padre de Selena se llamaba Abraham.",
                respuesta: true,
                feedback: "Verdadero. Abraham formó el grupo 'Selena y Los Dinos'."
            },
            {
                texto: "Selena es un símbolo de orgullo para la comunidad latina en Estados Unidos.",
                respuesta: true,
                feedback: "Verdadero. Ella representa el orgullo y la fuerza de la comunidad latina."
            }
        ];

        // 7. VARIABLES DE ESTADO DEL JUEGO BURBUJAS
        let puntuacion = 0;
        let vidas = 3;
        let combo = 0;
        let afirmacionActualIndex = 0;
        let juegoActivo = false;
        let temporizadorBurbuja;
        
        // 8. REFERENCIAS DEL DOM PARA BURBUJAS
        const juegoBurbujasSeccion = document.getElementById('juego-burbujas-seccion');
        const burbujaActiva = document.getElementById('burbuja-activa');
        const puntuacionDisplay = document.getElementById('puntuacion-burbujas');
        const vidasDisplay = document.getElementById('vidas-burbujas');
        const comboDisplay = document.getElementById('combo-burbujas');
        const comboAnimacion = document.getElementById('combo-display');
        const retroalimentacionVF = document.getElementById('retroalimentacion-vf');
        const pantallaFinalBurbujas = document.getElementById('pantalla-final-burbujas');
        const puntuacionFinalBurbujas = document.getElementById('puntuacion-final-burbujas');
        const tituloFinalBurbujas = document.getElementById('titulo-final-burbujas');
        const areaJuegoBurbujas = document.getElementById('area-juego-burbujas');

        /**
         * Inicia el juego de burbujas.
         */
        function iniciarJuegoBurbujas() {
            vocabularioSeccion.style.display = 'none';
            juegoBurbujasSeccion.style.display = 'block';
            juegoActivo = true;
            reiniciarValoresBurbujas();
            mostrarNuevaBurbuja();
        }
        
        /**
         * Reinicia los valores de vidas y puntuación para las burbujas.
         */
        function reiniciarValoresBurbujas() {
            puntuacion = 0;
            vidas = 3;
            combo = 0;
            // Mezclar para que no salgan en el mismo orden cada vez
            afirmacionesBurbujas.sort(() => Math.random() - 0.5); 
            afirmacionActualIndex = 0;
            actualizarDisplayBurbujas();
            pantallaFinalBurbujas.style.display = 'none';
        }

        /**
         * Actualiza el contador de puntos, vidas y combo.
         */
        function actualizarDisplayBurbujas() {
            puntuacionDisplay.textContent = puntuacion;
            vidasDisplay.textContent = '❤️'.repeat(vidas);
            comboDisplay.textContent = combo;
        }
        
        /**
         * Muestra la siguiente burbuja.
         */
        function mostrarNuevaBurbuja() {
            if (!juegoActivo) return;

            // Reiniciar el índice si se llega al final de las afirmaciones para que sea infinito hasta que se acaben las vidas
            if (afirmacionActualIndex >= afirmacionesBurbujas.length) {
                afirmacionesBurbujas.sort(() => Math.random() - 0.5); // Re-mezclar
                afirmacionActualIndex = 0;
            }

            const afirmacion = afirmacionesBurbujas[afirmacionActualIndex];
            burbujaActiva.textContent = afirmacion.texto;
            burbujaActiva.dataset.respuestaCorrecta = afirmacion.respuesta;
            burbujaActiva.dataset.feedback = afirmacion.feedback;

            // Reiniciar animación y posición
            burbujaActiva.style.animation = 'none';
            burbujaActiva.offsetHeight; 
            burbujaActiva.style.top = `${areaJuegoBurbujas.offsetHeight}px`; 
            burbujaActiva.style.display = 'block';
            burbujaActiva.classList.remove('explotando');

            // Posición horizontal aleatoria
            const randomLeft = Math.floor(Math.random() * 50) + 20; 
            burbujaActiva.style.left = `${randomLeft}%`;

            // Duración de la animación (velocidad)
            const duracionAnimacion = 6 + (Math.random() * 2);
            burbujaActiva.style.animation = `flotar ${duracionAnimacion}s linear forwards`;
            
            // Temporizador para fallo por tiempo
            clearTimeout(temporizadorBurbuja);
            temporizadorBurbuja = setTimeout(() => {
                perderVida("¡Tiempo agotado! La afirmación cayó al vacío.");
            }, duracionAnimacion * 1000);
            
            afirmacionActualIndex++;
        }

        /**
         * Maneja la respuesta del usuario.
         */
        function responderBurbuja(respuestaUsuario) {
            if (!juegoActivo) return;

            clearTimeout(temporizadorBurbuja);
            const respuestaCorrecta = burbujaActiva.dataset.respuestaCorrecta === 'true';

            if (respuestaUsuario === respuestaCorrecta) {
                // RESPUESTA CORRECTA
                puntuacion += 10;
                combo++;
                
                if (combo >= 3) {
                    puntuacion += combo * 5;
                    mostrarComboAnimacion(combo);
                }
                
                // Animación de explosión
                burbujaActiva.style.animation = 'none';
                burbujaActiva.classList.add('explotando');
                
                mostrarFeedbackVF('✅ ¡Correcto!', 1000);
                
                setTimeout(() => {
                    mostrarNuevaBurbuja();
                }, 400);
                
            } else {
                // RESPUESTA INCORRECTA
                combo = 0;
                perderVida(burbujaActiva.dataset.feedback);
            }

            actualizarDisplayBurbujas();
        }

        /**
         * Reduce la vida y maneja el fin del juego por vidas.
         */
        function perderVida(mensajeFeedback) {
            vidas--;
            combo = 0;
            
            // Se usa el mensaje de feedback del dataset, que ya tiene <strong>
            mostrarFeedbackVF(`❌ ${mensajeFeedback}`, 3000); 
            
            if (vidas <= 0) {
                juegoActivo = false;
                terminarJuegoBurbujas();
            } else {
                burbujaActiva.style.animation = 'none';
                burbujaActiva.classList.remove('explotando');
                mostrarNuevaBurbuja();
            }
            actualizarDisplayBurbujas();
        }
        
        /**
         * Muestra la animación de combo.
         */
        function mostrarComboAnimacion(comboCount) {
            comboAnimacion.textContent = `${comboCount} ¡COMBO! 🌟`;
            comboAnimacion.style.display = 'block';
            comboAnimacion.style.animation = 'none';
            comboAnimacion.offsetHeight;
            comboAnimacion.style.animation = 'comboPop 0.8s ease-out forwards';
        }

        /**
         * Muestra un mensaje de retroalimentación temporal.
         */
        function mostrarFeedbackVF(mensaje, duracion) {
            retroalimentacionVF.innerHTML = mensaje;
            retroalimentacionVF.style.display = 'block';
            
            setTimeout(() => {
                retroalimentacionVF.style.display = 'none';
            }, duracion);
        }

        /**
         * Finaliza el juego y muestra la pantalla de puntuación.
         */
        function terminarJuegoBurbujas() {
            juegoActivo = false;
            clearTimeout(temporizadorBurbuja);
            burbujaActiva.style.display = 'none';
            
            puntuacionFinalBurbujas.textContent = puntuacion;
            
            // LÓGICA DE TROFEO SOLICITADA
            if (puntuacion > 0) {
                tituloFinalBurbujas.innerHTML = '¡Fin del Juego! 🏆';
            } else {
                tituloFinalBurbujas.innerHTML = '¡Fin del Juego!';
            }

            pantallaFinalBurbujas.style.display = 'flex';
        }

        // 9. FUNCIÓN DE INICIO AUTOMÁTICO
        // Mantiene la sección de lectura visible al cargar.
    </script>

</body>


</html>
